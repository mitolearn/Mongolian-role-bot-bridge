Perfect bro 👑 — let’s extend the collect flow so admins must enter their bank account details when they withdraw, and you automatically receive those details in your DM with the payout request.


---

🔄 Flow Update with Bank Account

1. Admin runs /status → sees dashboard with Collect Now button.


2. When they click Collect Now, bot opens a modal form with:

🏦 Bank Account Number / IBAN (required)

👤 Account Holder Name (required)

(Optional) Bank name / note field



3. After submit:

Bot stores their info temporarily with the payout request.

Bot sends you (the owner) a DM (or in your staff server) with:

Guild ID + Name

Admin user info

Gross revenue, 3% fee, Net payout

Plans breakdown

Bank account number + holder name → ✅ so you can just copy-paste into your banking app.


Admin’s “Available Balance” resets to 0.





---

⚙️ Example Code Snippet (Collect Modal)

Here’s the extra piece you add to your status cog:

# ---------- COLLECT BUTTON ----------
class CollectButton(discord.ui.Button):
    def __init__(self, net_mnt: int):
        super().__init__(label=f"📤 Collect {net_mnt}₮", style=discord.ButtonStyle.success)
        self.net_mnt = net_mnt

    async def callback(self, interaction: discord.Interaction):
        # Show modal for bank details
        await interaction.response.send_modal(CollectModal(self.net_mnt))


class CollectModal(discord.ui.Modal, title="Bank Account for Payout"):
    account_number = discord.ui.TextInput(label="Bank Account / IBAN", required=True)
    account_name = discord.ui.TextInput(label="Account Holder Name", required=True)
    note = discord.ui.TextInput(label="Bank Name or Note (optional)", required=False)

    def __init__(self, net_mnt: int):
        super().__init__()
        self.net_mnt = net_mnt

    async def on_submit(self, interaction: discord.Interaction):
        from database import create_payout_record

        guild = interaction.guild
        admin = interaction.user

        # Save payout in DB
        payout_id = create_payout_record(
            str(guild.id),
            gross_mnt=0,  # you will calculate from DB
            fee_mnt=0,
            net_mnt=self.net_mnt,
            status="pending"
        )

        # ✅ Send owner (you) a private notification
        owner = interaction.client.get_user(OWNER_DISCORD_ID)  # put your Discord ID here
        if owner:
            embed = discord.Embed(
                title="💵 New Payout Request",
                description=(
                    f"**Guild:** {guild.name} ({guild.id})\n"
                    f"**Admin:** {admin.mention} ({admin.id})\n\n"
                    f"**Net Payout:** {self.net_mnt}₮\n\n"
                    f"🏦 **Bank Account:** {self.account_number}\n"
                    f"👤 **Holder:** {self.account_name}\n"
                    f"📝 Note: {self.note or '-'}"
                ),
                color=0xf1c40f
            )
            view = discord.ui.View()
            view.add_item(DoneButton(payout_id))
            await owner.send(embed=embed, view=view)

        await interaction.response.send_message(
            f"✅ Payout request submitted. You will receive **{self.net_mnt}₮** soon.",
            ephemeral=True
        )


class DoneButton(discord.ui.Button):
    def __init__(self, payout_id: int):
        super().__init__(label="✅ Mark as Done", style=discord.ButtonStyle.primary)
        self.payout_id = payout_id

    async def callback(self, interaction: discord.Interaction):
        from database import mark_payout_done
        mark_payout_done(self.payout_id)
        await interaction.response.send_message("✅ Marked as paid in system.", ephemeral=True)


---

📊 Admin Experience

When they use /status →

Embed Example:

📊 Server Finance Dashboard

💰 Total Revenue: **1,250,000₮**
Available to collect: **1,212,500₮**

👥 Active Members: 42

📦 Plans:
- Bronze: 20 members = 200,000₮
- Silver: 15 members = 375,000₮
- Gold: 7 members = 245,000₮

💡 3% service fee is deducted automatically.

Button: 📤 Collect 1,212,500₮


---

📥 Owner Experience

You get a DM:

💵 New Payout Request

Guild: MyCommunity (123456789)
Admin: @AdminName (987654321)

Net Payout: 1,212,500₮

🏦 Bank Account: 458795456123
👤 Holder: Bold Buyantogtokh
📝 Note: Khan Bank

With button → ✅ Mark as Done.


---

👉 Bro, do you want me to merge this into your existing /status cog code and hand you the full working file for copy-paste?

